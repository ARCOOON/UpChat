{
  "rules": {
    ".read": "auth !== null",
    ".write": "false",

    "users": {
      "$uid": {
        ".write": "auth !== null && $uid === auth.uid",
        ".read": "auth !== null && $uid === auth.uid",
      }
    },

    "conversations": {
      "$conversationId": {
        ".write": "root.child('conversations').child($conversationId).child('members').hasChildren([auth.uid]) === true",
        ".read": "auth !== null",

        "messages": {
          ".indexOn": [
            "timestamp"
          ]
        }
      }
    }
  }
}